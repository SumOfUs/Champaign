<style type="text/css">

  .inline-thermometer {
    max-width: 550px;
    margin: auto;
  }

  @media screen and (min-width: 992px){
    .petition-and-scroll-to-share__yes-no-question-wrapper .two-step__question p {
      font-size: 30px;
    }
  }
</style>

<div class="thank-you__cta">
  <div id="eoy-prompt">
    <span class="two-step__question">
        {{ 'fundraiser.two_step.cta_eoy' | t }}
    </span>
    <div id="eoy-thermometer" class="inline-thermometer"></div>
  </div>
  <div class="center-content center-content--accomodates-stuck-footer ">
    {% capture fundraiser_title %} {{ 'share_and_donate.fundraiser_title' | t }} {% endcapture %}
    {% include 'Fundraiser', freestanding: true, fundraiser_title: fundraiser_title %}
  </div>
</div>


<script type="text/javascript">
  function makeStepFullScreen(stepElement) {
    var padding = parseInt(stepElement.css("padding-top"), 10);
    var margin = parseInt(stepElement.css("margin-bottom"), 10);
    var totalElementHeight = stepElement.height() + padding + margin;
    if (totalElementHeight < window.innerHeight) {
      stepElement.css(
        "margin-bottom",
        margin + (window.innerHeight - totalElementHeight)
      );
    }
  }

  // the toggle component that contains this div is mounted within a window.setTimeout with 100 MS so I have to delay
  // this binding to get it to apply.
  window.setTimeout(function(){
    $('.DonationBandButton').click(function(){
      $('.fundraiser-bar__top').fadeIn();
      $('#eoy-prompt').fadeOut();
    });
  }, 400);


  var currency = window.champaign.store.getState().fundraiser.currency;
  var data = window.champaign.configuration.eoyThermometer.data;
  if (data.total_donations[currency] >= data.goals[currency]) {
    $('#eoy-thermometer').addClass('hidden-irrelevant');
  }
  else {
    var config = {...data, currency: currency };
    window.champaign.modules.load('eoy-thermometer', config)
    // .then(EoyThermometer => {
    //     console.log("Success?", EoyThermometer)
    // })
  }
</script>
